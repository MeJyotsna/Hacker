!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/build",r(r.s=20)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("@babel/runtime/regenerator")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("react-router")},function(e,t){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("react-chartkick")},function(e,t){e.exports=require("moment")},function(e,t){e.exports=require("redux-thunk")},function(e,t){e.exports=require("redux-logger")},function(e,t){e.exports=require("@babel/polyfill")},function(e,t){e.exports=require("regenerator-runtime/runtime")},function(e,t){e.exports=require("chart.js")},function(e,t,r){(t=r(19)(!1)).push([e.i,'.table {\r\n  width: 100%;\r\n  margin-bottom: 1rem;\r\n  color: #212529;\r\n  border-collapse: collapse;\r\n}\r\n.table thead th {\r\n  vertical-align: bottom;\r\n  border-bottom: 2px solid #dee2e6;\r\n  color: #fff;\r\n  background-color: rgb(255, 102, 0);\r\n}\r\n\r\n.table td,\r\n.table th {\r\n  padding: 0.3rem;\r\n  width: 5%;\r\n  text-align: center;\r\n  vertical-align: top;\r\n  border-top: 1px solid #dee2e6;\r\n}\r\n.table tr td:last-child,\r\n.table tr th:last-child {\r\n  width: 90%;\r\n  text-align: left;\r\n}\r\n.table tbody tr:nth-of-type(odd) {\r\n  background-color: rgba(0, 0, 0, 0.05);\r\n}\r\n.container {\r\n  max-width: 1200px;\r\n  width: 100%;\r\n  margin: auto;\r\n  display: block;\r\n}\r\n.clearfix::after,\r\n.clearfix::before {\r\n  clear: both;\r\n  content: "";\r\n  display: table;\r\n}\r\n.float-right {\r\n  float: right;\r\n}\r\n.float-left {\r\n  float: left;\r\n}\r\n.prevBtn {\r\n  margin-right: 10px;\r\n  border-right: 2px solid rgb(255, 102, 0);\r\n  padding-right: 10px;\r\n}\r\n.btn {\r\n  color: rgb(255, 102, 0);\r\n  display: inline-block;\r\n  cursor: pointer;\r\n}\r\nhr {\r\n  height: 1px;\r\n  background-color: rgb(255, 102, 0);\r\n}\r\n.upvotebtn {\r\n  width: 20%;\r\n  cursor: pointer;\r\n}\r\n.linkColor {\r\n  color: gray;\r\n  font-size: smaller;\r\n}\r\n.hideBtn {\r\n  cursor: pointer;\r\n}\r\n.btn_hide {\r\n  color: black;\r\n}\r\n.unvoteBtn {\r\n  margin-right: 5px;\r\n  border-right: 1px solid gray;\r\n  padding-right: 5px;\r\n}\r\np {\r\n  margin: auto;\r\n}\r\n.footer-wrap {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-top: 1em;\r\n}\r\n\r\n.footer-wrap .votes {\r\n  font-size: 1.2rem;\r\n  color: #000000;\r\n  font-weight: bold;\r\n  transform: rotate(-90deg);\r\n}\r\n\r\n.id-wrap {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.id-wrap .id {\r\n  font-size: 1.2rem;\r\n  color: #000000;\r\n  font-weight: bold;\r\n}\r\n',""]),e.exports=t},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var o=(i=n,l=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(c," */")),a=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[r].concat(a).concat([o]).join("\n")}var i,l,c;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(n)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(o[i]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);n&&o[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),t.push(c))}},t}},function(e,t,r){"use strict";r.r(t);var n=r(5),o=r.n(n),a=r(7),i=r.n(a),l=(r(15),r(0)),c=r.n(l),s=r(8),u=r.n(s),p=r(9),d=r(6),f=r(4),h=r(1),m=r.n(h),g=r(3),b=r.n(g),v=r(10),y=r.n(v),w=(r(16),e=>({type:"FETCH_NEWS_FEED",payload:e})),O=(e,t)=>function(){var r=y()(b.a.mark((function r(n){var o,a,i;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=[],a=b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://hn.algolia.com/api/v1/items/"+parseInt(t)).then(e=>e.json()).then(e=>{var t=e;if(null!=t.title){var r=t.title,a=t.id,i=t.author,l=t.url,c=t.created_at_i,s=t.points,u=t.children.length,p=new Date(1e3*c),d=p.getMonth()+"/"+p.getDay()+"/"+p.getFullYear(),f=localStorage.getItem("news_feed"+a),h=JSON.parse(f),m=null!=h?h.vote_count:0,g=null!=h&&h.hide&&1===h.hide?1:0;if(0===g){var b={id:a,title:r,author:i,time:d,url:l,vote_count:m>s?m:s,comments:u,hide:g};o.push(b),localStorage.setItem("news_feed"+a,JSON.stringify(b)),n(w(o))}}}).catch(e=>{console.log("Error Feed -- "+t+" == "+e)});case 2:case"end":return e.stop()}}),e)})),i=e;case 3:if(!(i<t)){r.next=8;break}return r.delegateYield(a(i),"t0",5);case 5:i++,r.next=3;break;case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),x=r(11),E=(r(17),r(12));class N extends c.a.Component{constructor(e){super(e),m()(this,"renderChart",e=>{for(var t=[],r=0;r<e.length;r++){var n=e[r].id.toString(),o=localStorage.getItem("news_feed"+n),a=JSON.parse(o),i={[n]:null!=a?a.vote_count:0};t.push(i)}var l=JSON.stringify(t);l=(l=(l=l.replace(/[{}]/g,"")).replace("[","{")).replace("]","}");var s=JSON.parse(l);return c.a.createElement(x.LineChart,{data:s})}),m()(this,"renderVoteCount",e=>{var t,r=e.id,n=JSON.parse(JSON.stringify(this.props.voteCount)).voteCount;if(r==n.id)t=n.vote_count;else{var o=localStorage.getItem("news_feed"+r),a=JSON.parse(o);t=null!=a?a.vote_count:0}return c.a.createElement("span",{className:""},t)}),m()(this,"handleUpvote",e=>{var t=e.id,r=e.title,n=localStorage.getItem("news_feed"+t);console.log("selected item from storge",n);var o=JSON.parse(n),a=o.title,i=o.vote_count;if(r==a){var l=parseInt(i)+1,c=e;c.showUpvoteBtn=!1,c.vote_count=l,localStorage.setItem("news_feed"+t,JSON.stringify(c)),this.props.setUpVoteCount(c)}}),m()(this,"handleNewsHide",e=>{this.props.hideNewsFeed(this.props.newsFeed.newsFeed,e)}),this.state={start:1,end:31}}componentDidMount(){this.props.fetchNewsFeed(this.state.start,this.state.end)}previousPage(){var e=this.state.end>61?this.state.end-30:31,t=this.state.start>31?this.state.start-30:1;this.setState({end:e,start:t}),this.props.fetchNewsFeed(t,e)}nextPage(){var e=this.state.end+30,t=this.state.start+30;this.setState({end:e,start:t}),this.props.fetchNewsFeed(t,e)}getUrl(e){if(console.log("open url",e),null!=e)return e.replace("http://","").replace("https://","").split(/[/?#]/)[0]}render(){var e=JSON.parse(JSON.stringify(this.props.newsFeed.newsFeed));return c.a.createElement("div",{className:"container"},c.a.createElement("table",{className:"table",cellPadding:"0",cellSpacing:"0",width:"100%",border:"0"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Comments"),c.a.createElement("th",null,"Vote Count"),c.a.createElement("th",null,"Upvote"),c.a.createElement("th",null,"News details"))),c.a.createElement("tbody",null,e&&e.length>0&&e.map(e=>c.a.createElement("tr",null,c.a.createElement("td",null,e.comments),c.a.createElement("td",null,this.renderVoteCount(e)),c.a.createElement("td",null,c.a.createElement("img",{onClick:()=>this.handleUpvote(e),className:"upvotebtn",src:"https://news.ycombinator.com/grayarrow2x.gif",alt:"upvote",title:"upvote"})),c.a.createElement("td",null,e.title," ",c.a.createElement("span",null,c.a.createElement("a",{href:e.url,className:"",target:"_blank",className:"linkColor"},"(",this.getUrl(e.url),")")," ",c.a.createElement("span",{className:"linkColor"},"by")," ",c.a.createElement("b",null,e.author),c.a.createElement("span",{className:"linkColor"}," ",E(new Date(e.time),"").fromNow()),c.a.createElement("span",{className:"hideBtn linkColor",onClick:()=>this.handleNewsHide(e.id)}," ","[ ",c.a.createElement("span",{className:"btn_hide"},"hide"),"]"))))))),c.a.createElement("div",{className:"clearfix"},c.a.createElement("div",{className:"float-right"},c.a.createElement("div",{className:"prevBtn btn",onClick:()=>this.previousPage()},"Previous"),c.a.createElement("div",{className:"nextBtn btn",onClick:()=>this.nextPage()},"Next"))),c.a.createElement("hr",null),c.a.createElement("div",{className:"clearfix footer-wrap"},c.a.createElement("div",null,c.a.createElement("p",{className:"votes"},"Votes")),this.renderChart(e)),c.a.createElement("div",{className:"id-wrap"},c.a.createElement("p",{className:"id"},"ID")))}}var S=Object(f.connect)(e=>({newsFeed:e.newsFeed,voteCount:e.voteCount}),e=>({fetchNewsFeed:(t,r)=>e(O(t,r)),setUpVoteCount:t=>{return e((r=t,e=>{e({type:"SET_UPVOTE_COUNT",payload:r})}));var r},hideNewsFeed:(t,r)=>e(((e,t)=>r=>{if(null!=e){var n=JSON.parse(JSON.stringify(e));if(void 0!==n){var o=n,a=o.findIndex(e=>e.id===t),i=o[a];o.splice(a,1);var l={id:i.id,title:i.title,author:i.author,time:i.posted_time,url:i.url,vote_count:i.vote_count,comments:i.comments,hide:1};localStorage.setItem("news_feed"+t,JSON.stringify(l)),r(w(o))}}})(t,r))}))(N),j=(r(18),r(2)),_=r(13),C=r.n(_),P=r(14),k=r.n(P);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){m()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D={newsFeed:""},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_NEWS_FEED":return q(q({},e),{},{newsFeed:t.payload});default:return e}};function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){m()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T={voteCount:""},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_UPVOTE_COUNT":return I(I({},e),{},{voteCount:t.payload});default:return e}},V=Object(j.combineReducers)({newsFeed:J,voteCount:M}),B=Object(j.applyMiddleware)(C.a,k.a),R=Object(j.createStore)(V,B);var H=function(){return c.a.createElement(f.Provider,{store:R},c.a.createElement(d.Switch,null,c.a.createElement(d.Route,{path:"/",exact:!0,component:S})))},z=o()();z.use(i.a.json()),z.use(o.a.static("build/public")),z.get("*",(e,t)=>{var r=u.a.renderToString(c.a.createElement(p.StaticRouter,{location:e.url,context:{}},c.a.createElement(H,null))),n='\n      <!DOCTYPE html>\n      <html>\n      <head>\n          <meta charset="utf-8">\n          <meta content="IE=edge" http-equiv="X-UA-Compatible">\n          <meta content="width=device-width, initial-scale=1" name="viewport">\n          <title>'.concat("",'</title>\n      </head>\n      <body>\n          <div id="root">').concat(r,'</div>\n          <script src="client_bundle.js"><\/script>\n      </body>\n      </html>');t.send(n)}),z.listen(3001,(function(){console.log("Server listening to port 3001")}))}]);