!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/build",r(r.s=20)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("@babel/runtime/regenerator")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("react-router")},function(e,t){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("moment")},function(e,t){e.exports=require("redux-thunk")},function(e,t){e.exports=require("redux-logger")},function(e,t){e.exports=require("@babel/polyfill")},function(e,t){e.exports=require("regenerator-runtime/runtime")},function(e,t){e.exports=require("react-chartkick")},function(e,t){e.exports=require("chart.js")},function(e,t,r){(t=r(19)(!1)).push([e.i,'.table {\r\n  width: 100%;\r\n  margin-bottom: 1rem;\r\n  color: #212529;\r\n  border-collapse: collapse;\r\n}\r\n.table thead th {\r\n  vertical-align: bottom;\r\n  border-bottom: 2px solid #dee2e6;\r\n  color: #fff;\r\n  background-color: rgb(255, 102, 0);\r\n}\r\n\r\n.table td,\r\n.table th {\r\n  padding: 0.3rem;\r\n  width: 5%;\r\n  text-align: center;\r\n  vertical-align: top;\r\n  border-top: 1px solid #dee2e6;\r\n}\r\n.table tr td:last-child,\r\n.table tr th:last-child {\r\n  width: 90%;\r\n  text-align: left;\r\n}\r\n.table tbody tr:nth-of-type(odd) {\r\n  background-color: rgba(0, 0, 0, 0.05);\r\n}\r\n.container {\r\n  max-width: 1200px;\r\n  width: 100%;\r\n  margin: auto;\r\n  display: block;\r\n}\r\n.clearfix::after,\r\n.clearfix::before {\r\n  clear: both;\r\n  content: "";\r\n  display: table;\r\n}\r\n.float-right {\r\n  float: right;\r\n}\r\n.float-left {\r\n  float: left;\r\n}\r\n.prevBtn {\r\n  margin-right: 10px;\r\n  border-right: 2px solid rgb(255, 102, 0);\r\n  padding-right: 10px;\r\n}\r\n.btn {\r\n  color: rgb(255, 102, 0);\r\n  display: inline-block;\r\n  cursor: pointer;\r\n}\r\nhr {\r\n  height: 1px;\r\n  background-color: rgb(255, 102, 0);\r\n}\r\n.upvotebtn {\r\n  width: 20%;\r\n  cursor: pointer;\r\n}\r\n.linkColor {\r\n  color: gray;\r\n  font-size: smaller;\r\n}\r\n.hideBtn {\r\n  cursor: pointer;\r\n}\r\n.btn_hide {\r\n  color: black;\r\n}\r\n.unvoteBtn {\r\n  margin-right: 5px;\r\n  border-right: 1px solid gray;\r\n  padding-right: 5px;\r\n}\r\np {\r\n  margin: auto;\r\n}\r\n.footer-wrap {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-top: 1em;\r\n}\r\n\r\n.footer-wrap .votes {\r\n  font-size: 1.2rem;\r\n  color: #000000;\r\n  font-weight: bold;\r\n  transform: rotate(-90deg);\r\n}\r\n\r\n.id-wrap {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.id-wrap .id {\r\n  font-size: 1.2rem;\r\n  color: #000000;\r\n  font-weight: bold;\r\n}\r\n',""]),e.exports=t},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var a=(i=n,l=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(c," */")),o=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[r].concat(o).concat([a]).join("\n")}var i,l,c;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(n)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(a[i]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);n&&a[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),t.push(c))}},t}},function(e,t,r){"use strict";r.r(t);var n=r(4),a=r.n(n),o=r(7),l=r.n(o),c=(r(14),r(0)),s=r.n(c),u=r(8),p=r.n(u),d=r(9),f=r(5),m=r(3),h=r(1),g=r.n(h),b=r(6),v=r.n(b),y=r(10),w=r.n(y),O=(r(15),e=>({type:"FETCH_NEWS_FEED",payload:e})),E=e=>function(){var t=w()(v.a.mark((function t(r){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.next=3,fetch("https://hn.algolia.com/api/v1/search?page="+e+"&hitsPerPage=30").then(e=>e.json()).then(e=>{e.hits.map(e=>{if(null!=e.title){var t=e.title,r=e.objectID,a=e.author,o=e.url,i=e.created_at_i,l=e.points,c=e.num_comments,s=new Date(1e3*i),u=s.getMonth()+"/"+s.getDay()+"/"+s.getFullYear(),p=localStorage.getItem("news_feed"+r),d=JSON.parse(p),f=null!=d?d.vote_count:0,m=null!=d&&d.hide&&1===d.hide?1:0;if(0===m){var h={id:r,title:t,author:a,time:u,url:o,vote_count:f>l?f:l,comments:c,hide:m};n.push(h),localStorage.setItem("news_feed"+r,JSON.stringify(h))}}}),r(O(n))}).catch(e=>{console.log("Error Feed -- "+i+" == "+e)});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=r(16),N=(r(17),r(11));class S extends s.a.Component{constructor(e){super(e),g()(this,"renderChart",e=>{for(var t=[],r={},n=0;n<e.length;n++){var a=e[n].id.toString(),o=localStorage.getItem("news_feed"+a),i=JSON.parse(o),l=null!=i?i.vote_count:0,c={[" "+a]:l};r[a]=l,t.push(c)}var u=JSON.stringify(t);u=(u=(u=u.replace(/[{}]/g,"")).replace("[","{")).replace("]","}");var p=JSON.parse(u);return s.a.createElement(x.LineChart,{data:p})}),g()(this,"renderVoteCount",e=>{var t,r=e.id,n=JSON.parse(JSON.stringify(this.props.voteCount)).voteCount;if(r==n.id)t=n.vote_count;else{var a=localStorage.getItem("news_feed"+r),o=JSON.parse(a);t=null!=o?o.vote_count:0}return s.a.createElement("span",{className:""},t)}),g()(this,"handleUpvote",e=>{var t=e.id,r=e.title,n=localStorage.getItem("news_feed"+t),a=JSON.parse(n),o=a.title,i=a.vote_count;if(r==o){var l=parseInt(i)+1,c=e;c.showUpvoteBtn=!1,c.vote_count=l,localStorage.setItem("news_feed"+t,JSON.stringify(c)),this.props.setUpVoteCount(c)}}),g()(this,"handleNewsHide",e=>{this.props.hideNewsFeed(this.props.newsFeed.newsFeed,e)}),this.state={pageNumber:0}}componentDidMount(){this.props.fetchNewsFeed(this.state.pageNumber)}previousPage(){var e=this.state.pageNumber;if(e>0){var t=e-1;this.setState({pageNumber:t}),this.props.fetchNewsFeed(t)}}nextPage(){var e=this.state.pageNumber+1;this.setState({pageNumber:e}),this.props.fetchNewsFeed(e)}getUrl(e){if(null!=e)return e.replace("http://","").replace("https://","").split(/[/?#]/)[0]}render(){var e=JSON.parse(JSON.stringify(this.props.newsFeed.newsFeed));return s.a.createElement("div",{className:"container"},s.a.createElement("table",{className:"table",cellPadding:"0",cellSpacing:"0",width:"100%",border:"0"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Id"),s.a.createElement("th",null,"Comments"),s.a.createElement("th",null,"Vote Count"),s.a.createElement("th",null,"Upvote"),s.a.createElement("th",null,"News details"))),s.a.createElement("tbody",null,e&&0===e.length&&s.a.createElement("tr",null,s.a.createElement("td",null,"No Data Found.")),e&&e.length>0&&e.map(e=>s.a.createElement("tr",null,s.a.createElement("td",null,e.id),s.a.createElement("td",null,e.comments),s.a.createElement("td",null,this.renderVoteCount(e)),s.a.createElement("td",null,s.a.createElement("img",{onClick:()=>this.handleUpvote(e),className:"upvotebtn",src:"https://news.ycombinator.com/grayarrow2x.gif",alt:"upvote",title:"upvote"})),s.a.createElement("td",null,e.title," ",s.a.createElement("span",null,s.a.createElement("a",{href:e.url,className:"",target:"_blank",className:"linkColor"},"(",this.getUrl(e.url),")")," ",s.a.createElement("span",{className:"linkColor"},"by")," ",s.a.createElement("b",null,e.author),s.a.createElement("span",{className:"linkColor"}," ",N(new Date(e.time),"").fromNow()),s.a.createElement("span",{className:"hideBtn linkColor",onClick:()=>this.handleNewsHide(e.id)}," ","[ ",s.a.createElement("span",{className:"btn_hide"},"hide"),"]"))))))),s.a.createElement("div",{className:"clearfix"},s.a.createElement("div",{className:"float-right"},s.a.createElement("div",{className:"prevBtn btn",onClick:()=>this.previousPage()},"Previous"),s.a.createElement("div",{className:"nextBtn btn",onClick:()=>this.nextPage()},"Next"))),s.a.createElement("hr",null),s.a.createElement("div",{className:"clearfix footer-wrap"},s.a.createElement("div",null,s.a.createElement("p",{className:"votes"},"Votes")),this.renderChart(e)),s.a.createElement("div",{className:"id-wrap"},s.a.createElement("p",{className:"id"},"ID")))}}var j=Object(m.connect)(e=>({newsFeed:e.newsFeed,voteCount:e.voteCount}),e=>({fetchNewsFeed:(t,r)=>e(E(t)),setUpVoteCount:t=>{return e((r=t,e=>{e({type:"SET_UPVOTE_COUNT",payload:r})}));var r},hideNewsFeed:(t,r)=>e(((e,t)=>r=>{if(null!=e){var n=JSON.parse(JSON.stringify(e));if(void 0!==n){var a=n,o=a.findIndex(e=>e.id===t),i=a[o];a.splice(o,1);var l={id:i.id,title:i.title,author:i.author,time:i.posted_time,url:i.url,vote_count:i.vote_count,comments:i.comments,hide:1};localStorage.setItem("news_feed"+t,JSON.stringify(l)),r(O(a))}}})(t,r))}))(S),_=(r(18),r(2)),P=r(12),C=r.n(P),k=r(13),F=r.n(k);function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){g()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var J={newsFeed:""},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_NEWS_FEED":return D(D({},e),{},{newsFeed:t.payload});default:return e}};function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){g()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M={voteCount:""},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_UPVOTE_COUNT":return T(T({},e),{},{voteCount:t.payload});default:return e}},B=Object(_.combineReducers)({newsFeed:U,voteCount:V}),R=Object(_.applyMiddleware)(C.a,F.a),H=Object(_.createStore)(B,R);var z=function(){return s.a.createElement(m.Provider,{store:H},s.a.createElement(f.Switch,null,s.a.createElement(f.Route,{path:"/",exact:!0,component:j})))},L=a()();L.use(l.a.json()),L.use(a.a.static("build/public")),L.get("*",(e,t)=>{var r=p.a.renderToString(s.a.createElement(d.StaticRouter,{location:e.url,context:{}},s.a.createElement(z,null))),n='\n      <!DOCTYPE html>\n      <html>\n      <head>\n          <meta charset="utf-8">\n          <meta content="IE=edge" http-equiv="X-UA-Compatible">\n          <meta content="width=device-width, initial-scale=1" name="viewport">\n          <title>'.concat("",'</title>\n      </head>\n      <body>\n          <div id="root">').concat(r,'</div>\n          <script src="client_bundle.js"><\/script>\n      </body>\n      </html>');t.send(n)}),L.listen(3001,(function(){console.log("Server listening to port 3001")}))}]);